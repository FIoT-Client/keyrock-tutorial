
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="pt_BR">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Tutorial para Aplicações com Fiware &#8212; documentação Aplicação Fiware - Documentação 1.0</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="Índice" href="genindex.html" />
    <link rel="search" title="Buscar" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="tutorial-para-aplicacoes-com-fiware">
<h1>Tutorial para Aplicações com Fiware<a class="headerlink" href="#tutorial-para-aplicacoes-com-fiware" title="Link permanente para este título">¶</a></h1>
<div class="contents local topic" id="sumario">
<ul class="simple">
<li><a class="reference internal" href="#introducao" id="id2">Introdução</a></li>
<li><a class="reference internal" href="#instalacao-do-ambiente" id="id3">Instalação do ambiente</a><ul>
<li><a class="reference internal" href="#instalando-o-back-end-docker-infraestura-com-ge-s-fiware" id="id4">Instalando o back-end: Docker (Infraestura com GE’s FIWARE)</a></li>
<li><a class="reference internal" href="#configuracao-do-ambiente-virtual-para-o-back-end" id="id5">Configuração do ambiente virtual para o back-end</a></li>
<li><a class="reference internal" href="#executando-a-infraestrutura" id="id6">Executando a infraestrutura</a></li>
</ul>
</li>
<li><a class="reference internal" href="#criando-uma-aplicacao-no-fiware" id="id7">Criando uma Aplicação no FIWARE</a></li>
</ul>
</div>
<blockquote id="autores">
<div><p>Autores:</p>
<blockquote>
<div><ul class="simple">
<li>Irene Ginani Costa Pinheiro</li>
<li>Carlos Eduardo da Silva</li>
<li>Gabriela Cavalcante da Silva</li>
</ul>
</div></blockquote>
</div></blockquote>
<div class="section" id="introducao">
<span id="id1"></span><h2><a class="toc-backref" href="#id2">Introdução</a><a class="headerlink" href="#introducao" title="Link permanente para este título">¶</a></h2>
<p>Sabemos que é altamente desejado que informações, aplicativos, ou softwares sejam acessados somente por aqueles autorizados para tal. Para isso, existem vários mecanismos que lidam com diferentes aspectos de segurança da informação, tais como autenticação, políticas de segurança, entre outros.</p>
<p>A plataforma <a class="reference external" href="https://www.fiware.org/">FIWARE</a> foi projetada para considerar estes aspectos em uma abordagem secure by design, onde atributos de segurança da plataforma em si, e das aplicações que executem sobre ela, são considerados através de uma arquitetura de segurança que engloba questões relacionadas a gestão de identidades, controle de acesso e monitoramento de eventos de segurança. Isso é conseguido com um conjunto de Generic  Enablers (GEs) que podem ser integrados com outros GEs da plataforma. Dessa forma, utilizaremos as seguintes GE’s</p>
<p>O <strong>Identity Management</strong> GE (IdM) é responsável pelo gerenciamento de identidades de usuários, organizações e aplicações, assim como de suas respectivas credenciais, e da autenticação dessas entidades, além do suporte para a forma centralizada é importante lembrar que o FIWARE também dá suporte para auntenticação federada.. Este GE considera requisitos para a gestão de identidades de “coisas” (IoT), e atende às especificações para o gerenciamento de identidades sobre diferentes domínios. Ele também oferece uma API REST para o gerenciamento de identidades em ambientes multi-tenant, permitindo ainda a gestão de autorização, com suporte a definição de papéis e permissões específicas de uma organização ou de uma aplicação. Desenvolvedores interagem com este componente para registrarem suas aplicações no IdM, e para gerenciar a segurança de suas aplicações (credenciais, papéis e políticas de autorização). Usuário finais usam o IdM GE para se registrarem, e gerenciar seus respectivos perfis e suas organizações, enquanto que todas as entidades clientes de aplicações utilizam o IdM para fins de autenticação. A implementação de referência deste GE é o textbf{Keyrock}.</p>
<p>O <strong>Authorization PDP</strong> GE (PDP) é o componente responsável por gerenciar políticas de autorização na plataforma FIWARE. Este componente utiliza a linguagem XACML para representação de políticas, implementando a especificação XACML Core v3.0.  As políticas definidas pelos desenvolvedores por meio do IdM são gerenciadas pelo PDP, que é responsável também por avaliar requisições de acesso, encaminhadas pelo PEP, para permitir ou negar o acesso a serviços. A implementação de referência deste GE é o textbf{AuthZForce}.</p>
<p>O <strong>PEP Proxy</strong> GE (PEP) atua como ponto de aplicação de políticas de segurança na forma de um proxy-reverso HTTP, com o objetivo de proteger serviços REST. Este componente intercepta as requisições para o serviço, interage com o IdM para autenticar a requisição e o token da entidade cliente anexado à requisição, e em seguida interage com o PDP que autoriza ou não o acesso ao serviço. Além de validar o token e a requisição por meio do IdM, o PEP também recupera informações sobre o token, e seu usuário, deste mesmo componente. Para tomar uma decisão de acesso, o PDP leva em consideração a política de segurança definida, informações acerca da requisição do cliente, e informações acerca do token enviado (tais como atributos do cliente obtidos do IdM). O PEP aplica a decisão do PDP, e em caso positivo, encaminha a requisição ao serviço, e a resposta do serviço ao cliente. A implementação de referência para este GE é o textbf{Wilma}. A plataforma FIWARE suporta a utilização de outros PEPs, como por exemplo PEPs que protejam serviços não-REST ou serviços que utilizem outros protocolos além de HTTP.</p>
<p>Neste contexto, esse tutorial tem como objetivo ensinar aos usuários como conceber aplicações seguras utilizando conceitos autenticação e autorização através do uso das GE’s de segurança da plataforma FIWARE.</p>
</div>
<div class="section" id="instalacao-do-ambiente">
<span id="instalacaoambiente"></span><h2><a class="toc-backref" href="#id3">Instalação do ambiente</a><a class="headerlink" href="#instalacao-do-ambiente" title="Link permanente para este título">¶</a></h2>
<p>Agora iremos aprender a instalar o ambiente que você utilizará em sua aplicação</p>
<div class="section" id="instalando-o-back-end-docker-infraestura-com-ge-s-fiware">
<h3><a class="toc-backref" href="#id4">Instalando o back-end: Docker (Infraestura com GE’s FIWARE)</a><a class="headerlink" href="#instalando-o-back-end-docker-infraestura-com-ge-s-fiware" title="Link permanente para este título">¶</a></h3>
<p>Antes de colocar a infra em execução é necessário realizar algumas instalações:</p>
<ul class="simple">
<li>Para a instalação do docker siga o tutorial disponível em: <a class="reference external" href="https://www.digitalocean.com/community/tutorials/como-instalar-e-usar-o-docker-no-ubuntu-16-04-pt">Instalação do Docker</a></li>
<li>Para instalação do docker-compose siga o tutorial disponível em: <a class="reference external" href="https://www.digitalocean.com/community/tutorials/how-to-install-docker-compose-on-ubuntu-16-04">Instalação do docker-compose</a></li>
<li>Para instalação do docker-machine siga o tutorial disponível em: <a class="reference external" href="https://www.digitalocean.com/community/tutorials/how-to-provision-and-manage-remote-docker-hosts-with-docker-machine-on-ubuntu-16-04">Instalação do docker-machine</a></li>
</ul>
<p>Após a instalação é necessário fazer clone ou download deste repositório:</p>
<ul class="simple">
<li>Faça clone deste repositório: <a class="reference external" href="https://github.com/FIoT-Client/keyrock-tutorial">keyrock-tutorial</a></li>
</ul>
</div>
<div class="section" id="configuracao-do-ambiente-virtual-para-o-back-end">
<h3><a class="toc-backref" href="#id5">Configuração do ambiente virtual para o back-end</a><a class="headerlink" href="#configuracao-do-ambiente-virtual-para-o-back-end" title="Link permanente para este título">¶</a></h3>
<p>Após efetuar os passos da instalação é necessário configurar o ambiente para que possamos executar a infraestrutura necessária.</p>
<ul>
<li><p class="first">No arquivo keyrock-tutorial/keyrock/files/local_settings.py altere o valor do atributo na linha 629, onde consta.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ACCESS_CONTROL_URL</span> <span class="o">=</span> <span class="s1">&#39;localhost:8080&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">Para o IP da máquina que a infra será executada, tendo então.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ACCESS_CONTROL_URL</span> <span class="o">=</span> <span class="s1">&#39;IP-MÁQUINA:8080&#39;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="executando-a-infraestrutura">
<h3><a class="toc-backref" href="#id6">Executando a infraestrutura</a><a class="headerlink" href="#executando-a-infraestrutura" title="Link permanente para este título">¶</a></h3>
<p>Após efetuar os passos de Instalação e Configuração, para executar a infraestrutura é necesário:</p>
<ul>
<li><p class="first">Acessar a pasta keyrock-tutorial/security-components e efetuar o seguinte comando.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">build</span>
</pre></div>
</div>
</li>
<li><p class="first">Logo após o término dessa execução é necessário efetuar.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">docker</span><span class="o">-</span><span class="n">compose</span> <span class="n">up</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="criando-uma-aplicacao-no-fiware">
<h2><a class="toc-backref" href="#id7">Criando uma Aplicação no FIWARE</a><a class="headerlink" href="#criando-uma-aplicacao-no-fiware" title="Link permanente para este título">¶</a></h2>
<dl class="docutils">
<dt>Em seu navegador acesse o endereço do &lt;IP-Máquina&gt;:8000 acessando assim a interface do keyrock. Para conseguir efetuar o login utilize a seguinte conta.::</dt>
<dd>Usuário: idm
Senha: idm</dd>
</dl>
<p>Ao entrar na conta de administrador cadastre uma nova aplicação seguindo as instruções abaixo:</p>
<blockquote>
<div><ul class="simple">
<li>Para registrar uma aplicação clique no botão “register” como mostra a figura abaixo:</li>
</ul>
<img alt="documentacao/source/imagens/registro-app.png" src="documentacao/source/imagens/registro-app.png" />
<ul class="simple">
<li>Então siga os três passos para concluir o registro, inicialmente cadastre o nome da aplicação, sua descrição, a url da aplicação e a url de redirecionamento para onde o token de usuário será enviado.</li>
</ul>
<img alt="documentacao/source/imagens/info-registro.png" src="documentacao/source/imagens/info-registro.png" />
<ul class="simple">
<li>Aperte em “next” e escolha uma imagem para a aplicação, essa imagem é opcional</li>
</ul>
<img alt="documentacao/source/imagens/exibir-aplicacao.png" src="documentacao/source/imagens/exibir-aplicacao.png" />
<ul class="simple">
<li>Por fim, identifique a política de acesso para a sua aplicação, você poderá criar novas permissões e papéis através dessa interface.</li>
</ul>
<img alt="documentacao/source/imagens/developer-portal.png" src="documentacao/source/imagens/developer-portal.png" />
<ul class="simple">
<li>Após o término da configuração teremos essa página:</li>
</ul>
<img alt="documentacao/source/imagens/infos-cadastradas.png" src="documentacao/source/imagens/infos-cadastradas.png" />
</div></blockquote>
<p>Onde as informações de client secret serão usuadas na sua aplicação. Na mesma página gere um PEP-Proxy, e use suas credenciais na sua aplicação também, essas informações devem ser editadas no guia de configuração.</p>
<blockquote>
<div><p>Instalando o front-end : Docker (Aplicações Web)</p>
<blockquote>
<div><blockquote>
<div>Para que seja possível executar qualquer uma das aplicações é necessário fazer o clone deste repositório e ter realizado a instalação, configuração e execução da infraestrutura.</div></blockquote>
<p>Configuração do ambiente virtual para front-end</p>
<blockquote>
<div>Executando a Aplicação Web</div></blockquote>
</div></blockquote>
<p>Usando a Aplicação com os dispositivos de Segurança</p>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">Aplicação Fiware - Documentação</a></h1>








<h3>Navegação</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Busca rápida</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Ir" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Irene Ginani, Gabriela Cavalcante, Carlos Eduardo.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>